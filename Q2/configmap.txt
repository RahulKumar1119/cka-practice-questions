An NGINX Deployment named nginx-static is running in the nginx-static namespace.
It is configured using a ConfigMap named nginx-config.

ðŸ‘‰ Update the nginx-config ConfigMap to allow only TLSv1.3 connections.
Re-create, restart, or scale resources as necessary.

You can test the changes using the following command:

curl --tls-max 1.2 https://web.k8s.local


As TLSv1.2 should not be allowed anymore, the above command should fail.

------------------------------------------------------------------------------------------------------------------


Solution Steps

1. Check the ConfigMap

kubectl -n nginx-static get configmap nginx-config -o yaml

2. Update the ConfigMap

In NGINX, to enforce TLSv1.3 only, update the SSL config section:

ssl_protocols TLSv1.3;
ssl_prefer_server_ciphers on;


So edit the ConfigMap:

kubectl -n nginx-static edit configmap nginx-config

Update the section to:

server {
    listen 443 ssl;
    ssl_certificate     /etc/nginx/tls/tls.crt;
    ssl_certificate_key /etc/nginx/tls/tls.key;

    ssl_protocols TLSv1.3;
    ssl_prefer_server_ciphers on;

    location / {
        root /usr/share/nginx/html;
        index index.html;
    }
}

Save and exit.

3. Restart Deployment to Apply Config

Since the Pod mounts this ConfigMap, restart is required:

kubectl -n nginx-static rollout restart deployment nginx-static

4. Test

Run the test command:

curl --tls-max 1.2 https://web.k8s.local

âœ… This should fail (TLS1.2 disabled).

Now test TLS1.3 (should succeed):

curl --tls-max 1.3 https://web.k8s.local

